
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard CEP</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <header class="header">
    <img src="{{ url_for('static', filename='/img/logo_siri_no_text.png') }}" alt="Logo Siri" class="logo-siri" />
    <h1 class="title"><span class="cep-yellow">CONTROLE ESTATÍSTICO DE PROCESSO</span></h1>
    <div class="header-right">
      <div class="update-controls-row">
        <button class="update-now-btn" id="updateNowBtn">Atualizar Agora</button>
      </div>
      <div class="last-update-label">
        <span id="lastUpdate">Última atualização:</span>
      </div>
    </div>
  </header>
  <div class="main-content">
    <aside class="sidebar minimized" id="sidebar">
      <div class="sidebar-header">
        <button id="hamburgerSidebarBtn" class="sidebar-hamburger-btn" title="Abrir/Fechar Sidebar" aria-label="Abrir/Fechar Sidebar">
          <span class="hamburger-bar"></span>
          <span class="hamburger-bar"></span>
          <span class="hamburger-bar"></span>
        </button>
        <div class="sidebar-title-row">
          <h3 class="sidebar-title">Filtros</h3>
          <button class="sidebar-nav-btn" id="sidebarNavBtn" title="Navegar página" onclick="togglePage()">
            <svg id="sidebarNavIcon" class="sidebar-nav-icon" viewBox="0 0 24 24" aria-hidden="true">
              <polyline points="6 9 12 15 18 9" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
          </div>
<script>
    // Alterna seta do botão de navegação conforme página e faz scroll
      let onTopPage = true;
      function updateSidebarNavIcon(isTop) {
        const icon = document.getElementById('sidebarNavIcon');
        if (icon) {
          icon.classList.toggle('up', !isTop);
        }
      }
    function togglePage() {
      const container = document.querySelector('.snap-container');
      if (onTopPage) {
        container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
        updateSidebarNavIcon(false);
      } else {
        container.scrollTo({ top: 0, behavior: 'smooth' });
        updateSidebarNavIcon(true);
      }
      onTopPage = !onTopPage;
    }
    // Inicializa seta para baixo
    updateSidebarNavIcon(true);
  </script>
      </div>
      <div class="accordion">
        <div class="accordion-item">
          <button class="accordion-header" type="button">Data</button>
          <div class="accordion-content">
            <select id="dateFilter" class="filter-select">
              <option value="today" selected>Hoje</option>
              <option value="yesterday">Ontem</option>
              <option value="last3">Últimos 3 Dias</option>
              <option value="last7">Últimos 7 Dias</option>
              <option value="last30">Últimos 30 Dias</option>
              <option value="currentWeek">Semana Atual</option>
              <option value="previousWeek">Semana Anterior</option>
              <option value="currentMonth">Mês Atual</option>
              <option value="previousMonth">Mês Anterior</option>
              <option value="currentYear">Ano Atual</option>
              <option value="previousYear">Ano Anterior</option>
              <option value="custom">Personalizado</option>
            </select>
            <div id="customDateRange" class="custom-date-range">
              <input type="date" id="startDate" class="date-input">
              <input type="date" id="endDate" class="date-input">
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <button class="accordion-header" type="button">Células</button>
          <div class="accordion-content">
            <div class="checkbox-group">
              <label class="checkbox-label"><input type="checkbox" id="cell01" checked> UPS-01</label>
              <label class="checkbox-label"><input type="checkbox" id="cell02" checked> UPS-02</label>
              <label class="checkbox-label"><input type="checkbox" id="cell07" checked> UPS-07</label>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <button class="accordion-header" type="button">Tipo de Defeito</button>
          <div class="accordion-content">
            <div id="defectFilter" class="checkbox-group">
              <label class="checkbox-label"><input type="checkbox" value="0603 - Fiação com solda fria"> 0603 - Fiação com solda fria</label>
              <label class="checkbox-label"><input type="checkbox" value="0002 - Respingo de Solda"> 0002 - Respingo de Solda</label>
              <label class="checkbox-label"><input type="checkbox" value="0001 - Curto por Solda"> 0001 - Curto por Solda</label>
              <label class="checkbox-label"><input type="checkbox" value="0601 - Fiação invertida"> 0601 - Fiação invertida</label>
              <label class="checkbox-label"><input type="checkbox" value="1002 - Outros"> 1002 - Outros</label>
              <label class="checkbox-label"><input type="checkbox" value="0802 - Parafuso sem aperto"> 0802 - Parafuso sem aperto</label>
              <label class="checkbox-label"><input type="checkbox" value="0401 - Gabinete danificado"> 0401 - Gabinete danificado</label>
              <label class="checkbox-label"><input type="checkbox" value="0402 - Gabinete mal encaixado"> 0402 - Gabinete mal encaixado</label>
              <label class="checkbox-label"><input type="checkbox" value="0604 - Fiação sem solda"> 0604 - Fiação sem solda</label>
              <label class="checkbox-label"><input type="checkbox" value="0003 - Resto de terminal"> 0003 - Resto de terminal</label>
              <label class="checkbox-label"><input type="checkbox" value="0502 - Componente danificado"> 0502 - Componente danificado</label>
              <label class="checkbox-label"><input type="checkbox" value="0505 - Componente faltando"> 0505 - Componente faltando</label>
              <label class="checkbox-label"><input type="checkbox" value="0702 - Abraçadeira faltando"> 0702 - Abraçadeira faltando</label>
              <label class="checkbox-label"><input type="checkbox" value="0603 - Componente com solda fria"> 0603 - Componente com solda fria</label>
              <label class="checkbox-label"><input type="checkbox" value="1001 - Sem etiqueta"> 1001 - Sem etiqueta</label>
              <label class="checkbox-label"><input type="checkbox" value="0201 - Tráfo com barulho"> 0201 - Tráfo com barulho</label>
              <label class="checkbox-label"><input type="checkbox" value="0602 - Componente invertido"> 0602 - Componente invertido</label>
              <label class="checkbox-label"><input type="checkbox" value="0501 - Fiação danificada"> 0501 - Fiação danificada</label>
              <label class="checkbox-label"><input type="checkbox" value="0701 - Amarração errada"> 0701 - Amarração errada</label>
              <label class="checkbox-label"><input type="checkbox" value="0803 - Parafuso faltando"> 0803 - Parafuso faltando</label>
              <label class="checkbox-label"><input type="checkbox" value="0301 - Bateria danificada"> 0301 - Bateria danificada</label>
              <label class="checkbox-label"><input type="checkbox" value="0405 - Botão montado errado"> 0405 - Botão montado errado</label>
              <label class="checkbox-label"><input type="checkbox" value="0902 - Cabo Flat invertido"> 0902 - Cabo Flat invertido</label>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <button class="accordion-header" type="button">Dias de Inspeção</button>
          <div class="accordion-content">
            <div class="radio-group">
              <label class="radio-label"><input type="radio" name="inspectionDays" value="with" checked> Dias com mais de 10 inspeções</label>
              <label class="radio-label"><input type="radio" name="inspectionDays" value="all"> Incluir dias com menos de 10 inspeções</label>
            </div>
          </div>
        </div>
      </div>
    </aside>
    <div class="snap-container">
      <!-- Página 1: Dashboard -->
      <section class="snap-page">
        <section class="charts-area no-scroll">
          <div class="charts-grid-custom">
            <div class="chart-item chart-hoje">
              <h4 class="chart-title">DEFEITOS</h4>
              <div class="grafico-grid"></div>
            </div>
            <div class="top3-area">
              <div class="top3-title">TOP 3 DEFEITOS</div>
              <div class="top3-row">
                <div class="chart-item chart-small">
                  <h4 class="chart-title">0603 - Fiação com solda fria</h4>
                  <div class="grafico-grid"></div>
                </div>
                <div class="chart-item chart-small">
                  <h4 class="chart-title">0002 - Respingo de Solda</h4>
                  <div class="grafico-grid"></div>
                </div>
                <div class="chart-item chart-small">
                  <h4 class="chart-title">0001 - Curto por Solda</h4>
                  <div class="grafico-grid"></div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </section>
      <!-- Página 2: Conteúdo extra -->
      <section class="snap-page">
        <section class="charts-area no-scroll">
          <div class="charts-grid-custom">
            <div id="selectedDefectsContainer" class="selected-defects-grid"></div>
          </div>
        </section>
      </section>
    </div>
  </div>
  <footer class="footer">
    <img src="{{ url_for('static', filename='/img/logo_nhs_branca.png') }}" alt="Logo NHS" class="logo-nhs">
    <div class="footer-right">
      <span id="totalInspections">Inspeções: 95</span>
      <span id="totalDefects">Defeitos: 20</span>
    </div>
  </footer>
  <script src="{{ url_for('static', filename='script.js') }}" defer></script>
</body>
</html>